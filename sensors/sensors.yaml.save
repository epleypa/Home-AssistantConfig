- platform: time_date
  display_options:
  - 'time'
  - 'date'
  - 'time_utc'
  - 'beat'

- platform: template
  sensors:
    alarm_time:
      friendly_name: 'Time'
      value_template: '{{ "%0.02d:%0.02d" | format(states("input_number.alarmhour") | int, states("input_number.alarmminutes") | int) }}'

- platform: moon

- platform: speedtest
  monitored_conditions:
    - ping
    - download
    - upload

- platform: pushbullet
  api_key: !secret pushbullet_key

- platform: broadlink
  host: 192.168.1.42
  mac: 'B4:43:0D:FB:DD:62'
  monitored_conditions:
    - temperature

- platform: systemmonitor
  resources:
    - type: last_boot
    - type: since_last_boot
    - type: memory_use_percent
    - type: processor_use

- platform: rest
  name: 'WMATA'
  resource: https://api.wmata.com/StationPrediction.svc/json/GetPrediction/A08
  method: GET
  headers:
    api_key: !secret wmata_api
  value_template: '{{ value_json.Trains[0].LocationName }}'
  json_attributes:
    - Trains
  scan_interval: 150

- platform: template
  sensors:
    wmata_dc:
      value_template: '
        {% set trains = states.sensor.wmata.attributes.Trains %}
        {% for train in trains if train.DestinationCode == "B08" or train.DestinationCode == "B11" %}
        {% if loop.first %}{{ train.Min }}
        {% elif loop.last %} and {{ train.Min }}
        {% else %}, {{ train.Min }},
        {% endif %}
        {% endfor %}'
      unit_of_measurement: 'minutes'
    wmata_md:
      value_template: '
        {% set trains = states.sensor.wmata.attributes.Trains %}
        {% for train in trains if train.DestinationCode == "A15" or train.DestinationCode == "A11" %}
        {% if loop.first %}{{ train.Min }}
        {% elif loop.last %} and {{ train.Min }}
        {% else %}, {{ train.Min }},
        {% endif %}
        {% endfor %}'
      unit_of_measurement: 'minutes'

- platform: google_travel_time
  api_key: !secret google_homegraph_api
  origin: zone.home
  destination: zone.tysons_office
  name: Driving to Tysons
- platform: google_travel_time
  api_key: !secret google_homegraph_api
  origin: zone.home
  destination: zone.bethesda_office
  name: Driving to Bethesda


